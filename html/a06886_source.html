<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title> OpenFOAM&reg; Programmer's C++ documentation </title>
<!-- links -->
<link href="../OpenFOAMdocIcon.png" rel="icon" type="image/png" />
<link href="search/search.css" rel="stylesheet" type="text/css" />
<link href="../css/openfoam.css" rel="stylesheet" type="text/css" />
<script type="text/javaScript" src="search/searchdata.js"></script>
<script type="text/javaScript" src="search/search.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript">
    $(document).ready(function() { init_search(); });
</script>
<!-- meta info -->
<meta
    name="keywords"
    content="computational fluid dynamics, CFD, OpenFOAM, open source CFD, open source"
    />
</head>
<body>
<div class="page-container">
  <div class="header">
    <div class="header-top">
      <a class="sitelogo" href="http://www.openfoam.org" title="Home">
        <img class=left src="../css/img/OpenFOAMlogo.png">
      </a>
      <div class="sitename">
        <h1>
          <a href="http://foam.sourceforge.net/doc/Doxygen/html/"
             title="Source Guide">OpenFOAM C++ Documentation
          </a>
        </h1>
      </div>
    </div>  <!-- header-top -->
  </div>  <!-- header -->
  <div class="main">
    <div>
    <!-- begin of doxygen-generated content -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_f8c25efc4b6f6a8502a42d5af7554d23.html">lagrangian</a></li><li class="navelem"><a class="el" href="dir_d3c32a493136c130c1f0d51f4f35c297.html">intermediate</a></li><li class="navelem"><a class="el" href="dir_b8d19ddbdf0975644e34192d6313800e.html">parcels</a></li><li class="navelem"><a class="el" href="dir_0e9805b96b2bf461314a136059d44950.html">Templates</a></li><li class="navelem"><a class="el" href="dir_7d7e78a3280a68cf27da9706030972c9.html">ReactingParcel</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ReactingParcel.C</div>  </div>
</div><!--header-->
<div class="contents">
<a href="a06886.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*---------------------------------------------------------------------------*\</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">  =========                 |</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">  \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">   \\    /   O peration     |</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">    \\  /    A nd           | Copyright (C) 2011-2016 OpenFOAM Foundation</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">     \\/     M anipulation  |</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">-------------------------------------------------------------------------------</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">License</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">    This file is part of OpenFOAM.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">    OpenFOAM is free software: you can redistribute it and/or modify it</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">    under the terms of the GNU General Public License as published by</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">    the Free Software Foundation, either version 3 of the License, or</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">    (at your option) any later version.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">    OpenFOAM is distributed in the hope that it will be useful, but WITHOUT</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">    FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">    for more details.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">    You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">    along with OpenFOAM.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">\*---------------------------------------------------------------------------*/</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a06887.html">ReactingParcel.H</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a10508.html">specie.H</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a07117.html">CompositionModel.H</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a07140.html">PhaseChangeModel.H</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a08490.html">mathematicalConstants.H</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">using namespace </span><a class="code" href="a10920.html">Foam::constant::mathematical</a>;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">// * * * * * * * * * * *  Protected Member Functions * * * * * * * * * * * * //</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> ParcelType&gt;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> TrackData&gt;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keywordtype">void</span> <a class="code" href="a02147.html#a5b56a067700e6158ee77c1f7f4844b6b">Foam::ReactingParcel&lt;ParcelType&gt;::calcPhaseChange</a></div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="a02147.html#a5b56a067700e6158ee77c1f7f4844b6b">   39</a></span>&#160;(</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    TrackData&amp; td,</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keyword">const</span> scalar dt,</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keyword">const</span> <a class="code" href="a10909.html#a22f45a3cb4f074e609f58ebaeef0ecf9">label</a> celli,</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keyword">const</span> scalar Re,</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keyword">const</span> scalar Pr,</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keyword">const</span> scalar Ts,</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keyword">const</span> scalar nus,</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keyword">const</span> scalar d,</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keyword">const</span> scalar T,</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keyword">const</span> scalar mass,</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keyword">const</span> <a class="code" href="a10909.html#a22f45a3cb4f074e609f58ebaeef0ecf9">label</a> idPhase,</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keyword">const</span> scalar YPhase,</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keyword">const</span> <a class="code" href="a00765.html">scalarField</a>&amp; Y,</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <a class="code" href="a00765.html">scalarField</a>&amp; dMassPC,</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    scalar&amp; Sh,</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    scalar&amp; N,</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    scalar&amp; NCpW,</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="a00765.html">scalarField</a>&amp; Cs</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;)</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;{</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> TrackData::cloudType::reactingCloudType reactingCloudType;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keyword">const</span> <a class="code" href="a00332.html">CompositionModel&lt;reactingCloudType&gt;</a>&amp; <a class="code" href="a03036.html#a77ed71c4b333608a9d5c528ea28f04aa">composition</a> =</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        td.cloud().composition();</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="a01876.html">PhaseChangeModel&lt;reactingCloudType&gt;</a>&amp; phaseChange = td.cloud().phaseChange();</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span> (!phaseChange.<a class="code" href="a02554.html#a6fd1dc792a0b98e6530a7383d4ef3074">active</a>() || (YPhase &lt; SMALL))</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="a00765.html">scalarField</a> X(composition.<a class="code" href="a00332.html#a5380a8807acfea3ce69f4d4386f49f64">liquids</a>().X(Y));</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    scalar Tvap = phaseChange.<a class="code" href="a01876.html#a3ea72cb34ae15d6af1cbf25e211eb46a">Tvap</a>(X);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">if</span> (T &lt; Tvap)</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    }</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keyword">const</span> scalar TMax = phaseChange.<a class="code" href="a01876.html#a9a5edae723e86cbd5e41e11516b62018">TMax</a>(pc_, X);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keyword">const</span> scalar Tdash = <a class="code" href="a10909.html#a253e112ad2d56d96230ff39ea7f442dc">min</a>(T, TMax);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keyword">const</span> scalar Tsdash = <a class="code" href="a10909.html#a253e112ad2d56d96230ff39ea7f442dc">min</a>(Ts, TMax);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="a00765.html">scalarField</a> hmm(dMassPC);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// Calculate mass transfer due to phase change</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    phaseChange.<a class="code" href="a01876.html#ac37ac5442b13fc0752754be6a5d0971f">calculate</a></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    (</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        dt,</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        celli,</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        Re,</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        Pr,</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        d,</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        nus,</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        Tdash,</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        Tsdash,</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        pc_,</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        this-&gt;Tc_,</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        X,</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        dMassPC</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    );</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// Limit phase change mass by availability of each specie</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    dMassPC = <a class="code" href="a10909.html#a253e112ad2d56d96230ff39ea7f442dc">min</a>(mass*YPhase*Y, dMassPC);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keyword">const</span> scalar dMassTot = <a class="code" href="a10909.html#a3d8733143aad0e03b300186ab4bef137">sum</a>(dMassPC);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// Add to cumulative phase change mass</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    phaseChange.<a class="code" href="a01876.html#a7bf8f9c4483809f4414165dd5694b3bc">addToPhaseChangeMass</a>(this-&gt;nParticle_*dMassTot);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="a07991.html#a1a02bffef961ee015f0e9b03d336c6a9">forAll</a>(dMassPC, i)</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keyword">const</span> <a class="code" href="a10909.html#a22f45a3cb4f074e609f58ebaeef0ecf9">label</a> cid = composition.<a class="code" href="a00332.html#a10018cadde2cb831b9a23ea65cbe126c">localToCarrierId</a>(idPhase, i);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="keyword">const</span> scalar dh = phaseChange.<a class="code" href="a01876.html#a269260e9dec7679dc167e6ae42afaef9">dh</a>(cid, i, pc_, Tdash);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        Sh -= dMassPC[i]*dh/dt;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// Update molar emissions</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">if</span> (td.cloud().heatTransfer().BirdCorrection())</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="comment">// Average molecular weight of carrier mix - assumes perfect gas</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keyword">const</span> scalar Wc = this-&gt;rhoc_*<a class="code" href="a10923.html#a8da38bad7c31ecedcba908a993fbfaa2">RR</a>*this-&gt;Tc_/this-&gt;pc_;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <a class="code" href="a07991.html#a1a02bffef961ee015f0e9b03d336c6a9">forAll</a>(dMassPC, i)</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keyword">const</span> <a class="code" href="a10909.html#a22f45a3cb4f074e609f58ebaeef0ecf9">label</a> cid = composition.<a class="code" href="a00332.html#a10018cadde2cb831b9a23ea65cbe126c">localToCarrierId</a>(idPhase, i);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keyword">const</span> scalar Cp = composition.<a class="code" href="a00332.html#ad09148d289e10bb0f0264a4623d3822b">carrier</a>().Cp(cid, pc_, Tsdash);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="keyword">const</span> scalar W = composition.<a class="code" href="a00332.html#ad09148d289e10bb0f0264a4623d3822b">carrier</a>().W(cid);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <span class="keyword">const</span> scalar Ni = dMassPC[i]/(this-&gt;areaS(d)*dt*W);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            <span class="keyword">const</span> scalar Dab =</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                composition.<a class="code" href="a00332.html#a5380a8807acfea3ce69f4d4386f49f64">liquids</a>().properties()[i].D(pc_, Tsdash, Wc);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="comment">// Molar flux of species coming from the particle (kmol/m^2/s)</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            N += Ni;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <span class="comment">// Sum of Ni*Cpi*Wi of emission species</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            NCpW += Ni*Cp*W;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="comment">// Concentrations of emission species</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            Cs[cid] += Ni*d/(2.0*Dab);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> ParcelType&gt;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;Foam::scalar <a class="code" href="a02147.html#ad23f968a90e9edb0ad5563807ae78ceb">Foam::ReactingParcel&lt;ParcelType&gt;::updateMassFraction</a></div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="a02147.html#ad23f968a90e9edb0ad5563807ae78ceb">  151</a></span>&#160;(</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keyword">const</span> scalar mass0,</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keyword">const</span> <a class="code" href="a00765.html">scalarField</a>&amp; dMass,</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="a00765.html">scalarField</a>&amp; Y</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;) <span class="keyword">const</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;{</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    scalar mass1 = mass0 - <a class="code" href="a10909.html#a3d8733143aad0e03b300186ab4bef137">sum</a>(dMass);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// only update the mass fractions if the new particle mass is finite</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">if</span> (mass1 &gt; ROOTVSMALL)</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <a class="code" href="a07991.html#a1a02bffef961ee015f0e9b03d336c6a9">forAll</a>(Y, i)</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            Y[i] = (Y[i]*mass0 - dMass[i])/mass1;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">return</span> mass1;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;}</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">// * * * * * * * * * * * * * * * * Constructors  * * * * * * * * * * * * * * //</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> ParcelType&gt;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<a class="code" href="a02147.html#a4da6ae35e13613b745f8e4fa6ce9087c">Foam::ReactingParcel&lt;ParcelType&gt;::ReactingParcel</a></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;(</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keyword">const</span> <a class="code" href="a02147.html">ReactingParcel&lt;ParcelType&gt;</a>&amp; p</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;)</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;:</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    ParcelType(p),</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    mass0_(p.<a class="code" href="a02147.html#acc594749729798b20da613d9ab49b455">mass0_</a>),</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    Y_(p.<a class="code" href="a02147.html#a7aee4772814d30e73bac7b78e3e709be">Y_</a>),</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    pc_(p.<a class="code" href="a02147.html#a3773e5f440b900a8b2ccf00ccbf461c9">pc_</a>)</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;{}</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> ParcelType&gt;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<a class="code" href="a02147.html#a4da6ae35e13613b745f8e4fa6ce9087c">Foam::ReactingParcel&lt;ParcelType&gt;::ReactingParcel</a></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;(</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keyword">const</span> <a class="code" href="a02147.html">ReactingParcel&lt;ParcelType&gt;</a>&amp; p,</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keyword">const</span> <a class="code" href="a01959.html">polyMesh</a>&amp; mesh</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;)</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;:</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    ParcelType(p, mesh),</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    mass0_(p.<a class="code" href="a02147.html#acc594749729798b20da613d9ab49b455">mass0_</a>),</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    Y_(p.<a class="code" href="a02147.html#a7aee4772814d30e73bac7b78e3e709be">Y_</a>),</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    pc_(p.<a class="code" href="a02147.html#a3773e5f440b900a8b2ccf00ccbf461c9">pc_</a>)</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;{}</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">// * * * * * * * * * * * * *  Member Functions * * * * * * * * * * * * * * * //</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> ParcelType&gt;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> TrackData&gt;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="keywordtype">void</span> <a class="code" href="a02147.html#ad8f8e29c218563cbc811689b2b2ddb28">Foam::ReactingParcel&lt;ParcelType&gt;::setCellValues</a></div><div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="a02147.html#ad8f8e29c218563cbc811689b2b2ddb28">  206</a></span>&#160;(</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    TrackData&amp; td,</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keyword">const</span> scalar dt,</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keyword">const</span> <a class="code" href="a10909.html#a22f45a3cb4f074e609f58ebaeef0ecf9">label</a> celli</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;)</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;{</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    ParcelType::setCellValues(td, dt, celli);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    pc_ = td.pInterp().interpolate</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    (</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        this-&gt;position(),</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        this-&gt;currentTetIndices()</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    );</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">if</span> (pc_ &lt; td.cloud().constProps().pMin())</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">if</span> (debug)</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <a class="code" href="a08051.html#a58548a3fc67fb931bc4e99f94d5f41b8">WarningInFunction</a></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;Limiting observed pressure in cell &quot;</span> &lt;&lt; celli &lt;&lt; <span class="stringliteral">&quot; to &quot;</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                &lt;&lt; td.cloud().constProps().pMin() &lt;&lt;  <a class="code" href="a10909.html#ae53117a9770efe95d2d01bb5cc2c99ef">nl</a> &lt;&lt; <a class="code" href="a10909.html#a2db8fe02a0d3909e9351bb4275b23ce4">endl</a>;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        pc_ = td.cloud().constProps().pMin();</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> ParcelType&gt;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> TrackData&gt;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="keywordtype">void</span> <a class="code" href="a02147.html#af47d660ddf922326f7b61a7d841572e5">Foam::ReactingParcel&lt;ParcelType&gt;::cellValueSourceCorrection</a></div><div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="a02147.html#af47d660ddf922326f7b61a7d841572e5">  237</a></span>&#160;(</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    TrackData&amp; td,</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keyword">const</span> scalar dt,</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keyword">const</span> <a class="code" href="a10909.html#a22f45a3cb4f074e609f58ebaeef0ecf9">label</a> celli</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;)</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;{</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    scalar addedMass = 0.0;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    scalar maxMassI = 0.0;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="a07991.html#a1a02bffef961ee015f0e9b03d336c6a9">forAll</a>(td.cloud().rhoTrans(), i)</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        scalar dm = td.cloud().rhoTrans(i)[celli];</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        maxMassI = <a class="code" href="a10909.html#ac993e906cf2774ae77e666bc24e81733">max</a>(maxMassI, <a class="code" href="a10909.html#a929da2a3fdcf3dacbbe0487d3a330dae">mag</a>(dm));</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        addedMass += dm;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">if</span> (maxMassI &lt; ROOTVSMALL)</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keyword">const</span> scalar massCell = this-&gt;massCell(celli);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    this-&gt;rhoc_ += addedMass/td.cloud().pMesh().cellVolumes()[celli];</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keyword">const</span> scalar massCellNew = massCell + addedMass;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    this-&gt;Uc_ = (this-&gt;Uc_*massCell + td.cloud().UTrans()[celli])/massCellNew;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    scalar CpEff = 0.0;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="a07991.html#a1a02bffef961ee015f0e9b03d336c6a9">forAll</a>(td.cloud().rhoTrans(), i)</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        scalar Y = td.cloud().rhoTrans(i)[celli]/addedMass;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        CpEff += Y*td.cloud().composition().carrier().Cp</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        (</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            i,</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            this-&gt;pc_,</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            this-&gt;Tc_</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        );</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keyword">const</span> scalar Cpc = td.CpInterp().psi()[celli];</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    this-&gt;Cpc_ = (massCell*Cpc + addedMass*CpEff)/massCellNew;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    this-&gt;Tc_ += td.cloud().hsTrans()[celli]/(this-&gt;Cpc_*massCellNew);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">if</span> (this-&gt;Tc_ &lt; td.cloud().constProps().TMin())</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">if</span> (debug)</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <a class="code" href="a08051.html#a58548a3fc67fb931bc4e99f94d5f41b8">WarningInFunction</a></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;Limiting observed temperature in cell &quot;</span> &lt;&lt; celli &lt;&lt; <span class="stringliteral">&quot; to &quot;</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                &lt;&lt; td.cloud().constProps().TMin() &lt;&lt;  <a class="code" href="a10909.html#ae53117a9770efe95d2d01bb5cc2c99ef">nl</a> &lt;&lt; <a class="code" href="a10909.html#a2db8fe02a0d3909e9351bb4275b23ce4">endl</a>;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        this-&gt;Tc_ = td.cloud().constProps().TMin();</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    }</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> ParcelType&gt;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> TrackData&gt;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="keywordtype">void</span> <a class="code" href="a02147.html#a85e4067164c0d187844a02e1dab4506b">Foam::ReactingParcel&lt;ParcelType&gt;::correctSurfaceValues</a></div><div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="a02147.html#a85e4067164c0d187844a02e1dab4506b">  298</a></span>&#160;(</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    TrackData&amp; td,</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keyword">const</span> <a class="code" href="a10909.html#a22f45a3cb4f074e609f58ebaeef0ecf9">label</a> celli,</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keyword">const</span> scalar T,</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keyword">const</span> <a class="code" href="a00765.html">scalarField</a>&amp; Cs,</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    scalar&amp; rhos,</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    scalar&amp; mus,</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    scalar&amp; Prs,</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    scalar&amp; kappas</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;)</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;{</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">// No correction if total concentration of emitted species is small</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">if</span> (!td.cloud().heatTransfer().BirdCorrection() || (<a class="code" href="a10909.html#a3d8733143aad0e03b300186ab4bef137">sum</a>(Cs) &lt; SMALL))</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keyword">const</span> <a class="code" href="a02413.html">SLGThermo</a>&amp; <a class="code" href="a02676.html">thermo</a> = td.cloud().thermo();</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">// Far field carrier  molar fractions</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="a00765.html">scalarField</a> Xinf(thermo.<a class="code" href="a02413.html#ad09148d289e10bb0f0264a4623d3822b">carrier</a>().<a class="code" href="a00107.html#ac3684786b3929e4b59bca4087f9f4609">species</a>().<a class="code" href="a01397.html#a8a5f6fa29bd4b500caf186f60245b384">size</a>());</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <a class="code" href="a07991.html#a1a02bffef961ee015f0e9b03d336c6a9">forAll</a>(Xinf, i)</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        Xinf[i] = thermo.<a class="code" href="a02413.html#ad09148d289e10bb0f0264a4623d3822b">carrier</a>().<a class="code" href="a00107.html#a98fc615b86ae04a5a00a36c8fb619a16">Y</a>(i)[celli]/thermo.<a class="code" href="a02413.html#ad09148d289e10bb0f0264a4623d3822b">carrier</a>().<a class="code" href="a00113.html#ad064cd901ba7e9eaf0877f49761beb30">W</a>(i);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    Xinf /= <a class="code" href="a10909.html#a3d8733143aad0e03b300186ab4bef137">sum</a>(Xinf);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="comment">// Molar fraction of far field species at particle surface</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keyword">const</span> scalar Xsff = 1.0 - <a class="code" href="a10909.html#a253e112ad2d56d96230ff39ea7f442dc">min</a>(<a class="code" href="a10909.html#a3d8733143aad0e03b300186ab4bef137">sum</a>(Cs)*<a class="code" href="a10923.html#a8da38bad7c31ecedcba908a993fbfaa2">RR</a>*this-&gt;T_/pc_, 1.0);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">// Surface carrier total molar concentration</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keyword">const</span> scalar CsTot = pc_/(<a class="code" href="a10923.html#a8da38bad7c31ecedcba908a993fbfaa2">RR</a>*this-&gt;T_);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// Surface carrier composition (molar fraction)</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="a00765.html">scalarField</a> Xs(Xinf.size());</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">// Surface carrier composition (mass fraction)</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="a00765.html">scalarField</a> Ys(Xinf.size());</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="a07991.html#a1a02bffef961ee015f0e9b03d336c6a9">forAll</a>(Xs, i)</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="comment">// Molar concentration of species at particle surface</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keyword">const</span> scalar Csi = Cs[i] + Xsff*Xinf[i]*CsTot;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        Xs[i] = (2.0*Csi + Xinf[i]*CsTot)/3.0;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        Ys[i] = Xs[i]*thermo.<a class="code" href="a02413.html#ad09148d289e10bb0f0264a4623d3822b">carrier</a>().<a class="code" href="a00113.html#ad064cd901ba7e9eaf0877f49761beb30">W</a>(i);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    Xs /= <a class="code" href="a10909.html#a3d8733143aad0e03b300186ab4bef137">sum</a>(Xs);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    Ys /= <a class="code" href="a10909.html#a3d8733143aad0e03b300186ab4bef137">sum</a>(Ys);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    rhos = 0;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    mus = 0;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    kappas = 0;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    scalar Cps = 0;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    scalar sumYiSqrtW = 0;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    scalar sumYiCbrtW = 0;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="a07991.html#a1a02bffef961ee015f0e9b03d336c6a9">forAll</a>(Ys, i)</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keyword">const</span> scalar W = thermo.<a class="code" href="a02413.html#ad09148d289e10bb0f0264a4623d3822b">carrier</a>().<a class="code" href="a00113.html#ad064cd901ba7e9eaf0877f49761beb30">W</a>(i);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keyword">const</span> scalar sqrtW = <a class="code" href="a10909.html#a8616bd62eebf2342a80222fecb1bda71">sqrt</a>(W);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keyword">const</span> scalar cbrtW = <a class="code" href="a10909.html#aca0b7feea326c0e1e9e04078a319d019">cbrt</a>(W);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        rhos += Xs[i]*W;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        mus += Ys[i]*sqrtW*thermo.<a class="code" href="a02413.html#ad09148d289e10bb0f0264a4623d3822b">carrier</a>().<a class="code" href="a00113.html#a0f5015a12d1bfe6ef0e38a1e13ae6f12">mu</a>(i, pc_, T);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        kappas += Ys[i]*cbrtW*thermo.<a class="code" href="a02413.html#ad09148d289e10bb0f0264a4623d3822b">carrier</a>().<a class="code" href="a00113.html#a2a515bef556acbed90dc25f7c53f4633">kappa</a>(i, pc_, T);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        Cps += Xs[i]*thermo.<a class="code" href="a02413.html#ad09148d289e10bb0f0264a4623d3822b">carrier</a>().<a class="code" href="a00113.html#a65393b1c49912bd27cbf341eead73518">Cp</a>(i, pc_, T);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        sumYiSqrtW += Ys[i]*sqrtW;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        sumYiCbrtW += Ys[i]*cbrtW;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    Cps = <a class="code" href="a10909.html#ac993e906cf2774ae77e666bc24e81733">max</a>(Cps, ROOTVSMALL);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    rhos *= pc_/(<a class="code" href="a10923.html#a8da38bad7c31ecedcba908a993fbfaa2">RR</a>*<a class="code" href="a10909.html#ae57fda0abb14bb0944947c463c6e09d4">T</a>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    rhos = <a class="code" href="a10909.html#ac993e906cf2774ae77e666bc24e81733">max</a>(rhos, ROOTVSMALL);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    mus /= sumYiSqrtW;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    mus = <a class="code" href="a10909.html#ac993e906cf2774ae77e666bc24e81733">max</a>(mus, ROOTVSMALL);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    kappas /= sumYiCbrtW;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    kappas = <a class="code" href="a10909.html#ac993e906cf2774ae77e666bc24e81733">max</a>(kappas, ROOTVSMALL);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    Prs = Cps*mus/kappas;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;}</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> ParcelType&gt;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">class</span> TrackData&gt;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="keywordtype">void</span> <a class="code" href="a02147.html#a6a46515d02de32cba752f8c0cdd512e9">Foam::ReactingParcel&lt;ParcelType&gt;::calc</a></div><div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="a02147.html#a6a46515d02de32cba752f8c0cdd512e9">  390</a></span>&#160;(</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    TrackData&amp; td,</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keyword">const</span> scalar dt,</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keyword">const</span> <a class="code" href="a10909.html#a22f45a3cb4f074e609f58ebaeef0ecf9">label</a> celli</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;)</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;{</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> TrackData::cloudType::reactingCloudType reactingCloudType;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keyword">const</span> <a class="code" href="a00332.html">CompositionModel&lt;reactingCloudType&gt;</a>&amp; <a class="code" href="a03036.html#a77ed71c4b333608a9d5c528ea28f04aa">composition</a> =</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        td.cloud().composition();</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="comment">// Define local properties at beginning of time step</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keyword">const</span> scalar np0 = this-&gt;nParticle_;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keyword">const</span> scalar d0 = this-&gt;d_;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keyword">const</span> <a class="code" href="a02903.html">vector</a>&amp; U0 = this-&gt;U_;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keyword">const</span> scalar T0 = this-&gt;T_;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keyword">const</span> scalar mass0 = this-&gt;mass();</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">// Calc surface values</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    scalar Ts, rhos, mus, Prs, kappas;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    this-&gt;calcSurfaceValues(td, celli, T0, Ts, rhos, mus, Prs, kappas);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    scalar Res = this-&gt;<a class="code" href="a10909.html#affa366970bcbe0f7ccf7c85557a3e12b">Re</a>(U0, d0, rhos, mus);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="comment">// Sources</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="comment">// ~~~~~~~</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="comment">// Explicit momentum source for particle</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="a02903.html">vector</a> <a class="code" href="a10944.html#ac92e296062b7b025a96b82351c1d9b89">Su</a> = <a class="code" href="a10909.html#a096223899a8703ef9b9706dbf2b9a148">Zero</a>;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// Linearised momentum source coefficient</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    scalar Spu = 0.0;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">// Momentum transfer from the particle to the carrier phase</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <a class="code" href="a02903.html">vector</a> dUTrans = <a class="code" href="a10909.html#a096223899a8703ef9b9706dbf2b9a148">Zero</a>;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="comment">// Explicit enthalpy source for particle</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    scalar Sh = 0.0;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// Linearised enthalpy source coefficient</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    scalar Sph = 0.0;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// Sensible enthalpy transfer from the particle to the carrier phase</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    scalar dhsTrans = 0.0;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="comment">// 1. Compute models that contribute to mass transfer - U, T held constant</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment">// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">// Phase change</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment">// ~~~~~~~~~~~~</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">// Mass transfer due to phase change</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <a class="code" href="a00765.html">scalarField</a> dMassPC(Y_.size(), 0.0);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="comment">// Molar flux of species emitted from the particle (kmol/m^2/s)</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    scalar Ne = 0.0;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">// Sum Ni*Cpi*Wi of emission species</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    scalar NCpW = 0.0;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="comment">// Surface concentrations of emitted species</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="a00765.html">scalarField</a> Cs(composition.<a class="code" href="a00332.html#ad09148d289e10bb0f0264a4623d3822b">carrier</a>().species().size(), 0.0);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment">// Calc mass and enthalpy transfer due to phase change</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    calcPhaseChange</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    (</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        td,</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        dt,</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        celli,</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        Res,</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        Prs,</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        Ts,</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        mus/rhos,</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        d0,</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        T0,</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        mass0,</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        0,</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        1.0,</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        Y_,</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        dMassPC,</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        Sh,</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        Ne,</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        NCpW,</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        Cs</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    );</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="comment">// 2. Update the parcel properties due to change in mass</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="a00765.html">scalarField</a> dMass(dMassPC);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    scalar mass1 = updateMassFraction(mass0, dMass, Y_);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    this-&gt;Cp_ = composition.<a class="code" href="a00332.html#a3063f4507c05978b5d0b2ac54b5438b1">Cp</a>(0, Y_, pc_, T0);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="comment">// Update particle density or diameter</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">if</span> (td.cloud().constProps().constantVolume())</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    {</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        this-&gt;rho_ = mass1/this-&gt;volume();</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    }</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        this-&gt;d_ = <a class="code" href="a10909.html#aca0b7feea326c0e1e9e04078a319d019">cbrt</a>(mass1/this-&gt;rho_*6.0/<a class="code" href="a10920.html#a731b8788a4c01586c35266c7ca4fed04">pi</a>);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="comment">// Remove the particle when mass falls below minimum threshold</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">if</span> (np0*mass1 &lt; td.cloud().constProps().minParcelMass())</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        td.keepParticle = <span class="keyword">false</span>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordflow">if</span> (td.cloud().solution().coupled())</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            scalar dm = np0*mass0;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="comment">// Absorb parcel into carrier phase</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            <a class="code" href="a07991.html#a1a02bffef961ee015f0e9b03d336c6a9">forAll</a>(Y_, i)</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                scalar dmi = dm*Y_[i];</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                <a class="code" href="a10909.html#a22f45a3cb4f074e609f58ebaeef0ecf9">label</a> gid = composition.<a class="code" href="a00332.html#a10018cadde2cb831b9a23ea65cbe126c">localToCarrierId</a>(0, i);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                scalar hs = composition.<a class="code" href="a00332.html#ad09148d289e10bb0f0264a4623d3822b">carrier</a>().Hs(gid, pc_, T0);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                td.cloud().rhoTrans(gid)[celli] += dmi;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                td.cloud().hsTrans()[celli] += dmi*hs;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            }</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            td.cloud().UTrans()[celli] += dm*U0;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            td.cloud().phaseChange().addToPhaseChangeMass(np0*mass1);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        }</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    }</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="comment">// Correct surface values due to emitted species</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    correctSurfaceValues(td, celli, Ts, Cs, rhos, mus, Prs, kappas);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    Res = this-&gt;<a class="code" href="a10909.html#affa366970bcbe0f7ccf7c85557a3e12b">Re</a>(U0, this-&gt;d_, rhos, mus);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="comment">// 3. Compute heat- and momentum transfers</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="comment">// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="comment">// Heat transfer</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="comment">// ~~~~~~~~~~~~~</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="comment">// Calculate new particle temperature</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    this-&gt;T_ =</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        this-&gt;calcHeatTransfer</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        (</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            td,</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            dt,</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            celli,</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            Res,</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            Prs,</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            kappas,</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            NCpW,</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            Sh,</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            dhsTrans,</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            Sph</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        );</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    this-&gt;Cp_ = composition.<a class="code" href="a00332.html#a3063f4507c05978b5d0b2ac54b5438b1">Cp</a>(0, Y_, pc_, T0);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="comment">// Motion</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="comment">// ~~~~~~</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="comment">// Calculate new particle velocity</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    this-&gt;U_ =</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        this-&gt;calcVelocity(td, dt, celli, Res, mus, mass1, Su, dUTrans, Spu);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="comment">// 4. Accumulate carrier phase source terms</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="comment">// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">if</span> (td.cloud().solution().coupled())</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="comment">// Transfer mass lost to carrier mass, momentum and enthalpy sources</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <a class="code" href="a07991.html#a1a02bffef961ee015f0e9b03d336c6a9">forAll</a>(dMass, i)</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            scalar dm = np0*dMass[i];</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            <a class="code" href="a10909.html#a22f45a3cb4f074e609f58ebaeef0ecf9">label</a> gid = composition.<a class="code" href="a00332.html#a10018cadde2cb831b9a23ea65cbe126c">localToCarrierId</a>(0, i);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            scalar hs = composition.<a class="code" href="a00332.html#ad09148d289e10bb0f0264a4623d3822b">carrier</a>().Hs(gid, pc_, T0);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            td.cloud().rhoTrans(gid)[celli] += dm;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            td.cloud().UTrans()[celli] += dm*U0;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            td.cloud().hsTrans()[celli] += dm*hs;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        }</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="comment">// Update momentum transfer</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        td.cloud().UTrans()[celli] += np0*dUTrans;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        td.cloud().UCoeff()[celli] += np0*Spu;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="comment">// Update sensible enthalpy transfer</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        td.cloud().hsTrans()[celli] += np0*dhsTrans;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        td.cloud().hsCoeff()[celli] += np0*Sph;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="comment">// Update radiation fields</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">if</span> (td.cloud().radiation())</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        {</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            <span class="keyword">const</span> scalar ap = this-&gt;areaP();</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <span class="keyword">const</span> scalar T4 = <a class="code" href="a10909.html#aa0ae321d4861170e35fbb938636a4f40">pow4</a>(T0);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            td.cloud().radAreaP()[celli] += dt*np0*ap;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            td.cloud().radT4()[celli] += dt*np0*T4;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            td.cloud().radAreaPT4()[celli] += dt*np0*ap*T4;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    }</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;}</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">// * * * * * * * * * * * * * * IOStream operators  * * * * * * * * * * * * * //</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a06889.html">ReactingParcelIO.C</a>&quot;</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">// ************************************************************************* //</span></div><div class="ttc" id="a01397_html_a8a5f6fa29bd4b500caf186f60245b384"><div class="ttname"><a href="a01397.html#a8a5f6fa29bd4b500caf186f60245b384">Foam::List::size</a></div><div class="ttdeci">void size(const label)</div><div class="ttdoc">Override size to be inconsistent with allocated storage. </div><div class="ttdef"><b>Definition:</b> <a href="a07961_source.html#l00076">ListI.H:76</a></div></div>
<div class="ttc" id="a10923_html_a8da38bad7c31ecedcba908a993fbfaa2"><div class="ttname"><a href="a10923.html#a8da38bad7c31ecedcba908a993fbfaa2">Foam::constant::thermodynamic::RR</a></div><div class="ttdeci">const scalar RR</div><div class="ttdoc">Universal gas constant (default in [J/(kmol K)]) </div><div class="ttdef"><b>Definition:</b> <a href="a08493_source.html#l00044">thermodynamicConstants.C:44</a></div></div>
<div class="ttc" id="a10909_html_a929da2a3fdcf3dacbbe0487d3a330dae"><div class="ttname"><a href="a10909.html#a929da2a3fdcf3dacbbe0487d3a330dae">Foam::mag</a></div><div class="ttdeci">dimensioned&lt; scalar &gt; mag(const dimensioned&lt; Type &gt; &amp;)</div></div>
<div class="ttc" id="a10909_html_a8616bd62eebf2342a80222fecb1bda71"><div class="ttname"><a href="a10909.html#a8616bd62eebf2342a80222fecb1bda71">Foam::sqrt</a></div><div class="ttdeci">dimensionedScalar sqrt(const dimensionedScalar &amp;ds)</div><div class="ttdef"><b>Definition:</b> <a href="a08192_source.html#l00142">dimensionedScalar.C:142</a></div></div>
<div class="ttc" id="a00113_html_a65393b1c49912bd27cbf341eead73518"><div class="ttname"><a href="a00113.html#a65393b1c49912bd27cbf341eead73518">Foam::basicSpecieMixture::Cp</a></div><div class="ttdeci">virtual scalar Cp(const label speciei, const scalar p, const scalar T) const  =0</div><div class="ttdoc">Heat capacity at constant pressure [J/(kg K)]. </div></div>
<div class="ttc" id="a01876_html_a7bf8f9c4483809f4414165dd5694b3bc"><div class="ttname"><a href="a01876.html#a7bf8f9c4483809f4414165dd5694b3bc">Foam::PhaseChangeModel::addToPhaseChangeMass</a></div><div class="ttdeci">void addToPhaseChangeMass(const scalar dMass)</div><div class="ttdoc">Add to phase change mass. </div><div class="ttdef"><b>Definition:</b> <a href="a07139_source.html#l00159">PhaseChangeModel.C:159</a></div></div>
<div class="ttc" id="a02147_html_a3773e5f440b900a8b2ccf00ccbf461c9"><div class="ttname"><a href="a02147.html#a3773e5f440b900a8b2ccf00ccbf461c9">Foam::ReactingParcel::pc_</a></div><div class="ttdeci">scalar pc_</div><div class="ttdoc">Pressure [Pa]. </div><div class="ttdef"><b>Definition:</b> <a href="a06887_source.html#l00170">ReactingParcel.H:170</a></div></div>
<div class="ttc" id="a01876_html_a3ea72cb34ae15d6af1cbf25e211eb46a"><div class="ttname"><a href="a01876.html#a3ea72cb34ae15d6af1cbf25e211eb46a">Foam::PhaseChangeModel::Tvap</a></div><div class="ttdeci">virtual scalar Tvap(const scalarField &amp;X) const </div><div class="ttdoc">Return vapourisation temperature. </div><div class="ttdef"><b>Definition:</b> <a href="a07139_source.html#l00152">PhaseChangeModel.C:152</a></div></div>
<div class="ttc" id="a10920_html"><div class="ttname"><a href="a10920.html">Foam::constant::mathematical</a></div><div class="ttdoc">mathematical constants. </div></div>
<div class="ttc" id="a06887_html"><div class="ttname"><a href="a06887.html">ReactingParcel.H</a></div></div>
<div class="ttc" id="a08490_html"><div class="ttname"><a href="a08490.html">mathematicalConstants.H</a></div></div>
<div class="ttc" id="a10909_html_a096223899a8703ef9b9706dbf2b9a148"><div class="ttname"><a href="a10909.html#a096223899a8703ef9b9706dbf2b9a148">Foam::Zero</a></div><div class="ttdeci">static const zero Zero</div><div class="ttdef"><b>Definition:</b> <a href="a09420_source.html#l00091">zero.H:91</a></div></div>
<div class="ttc" id="a00332_html_a3063f4507c05978b5d0b2ac54b5438b1"><div class="ttname"><a href="a00332.html#a3063f4507c05978b5d0b2ac54b5438b1">Foam::CompositionModel::Cp</a></div><div class="ttdeci">virtual scalar Cp(const label phaseI, const scalarField &amp;Y, const scalar p, const scalar T) const </div><div class="ttdoc">Return specific heat caoacity for the phase phaseI. </div><div class="ttdef"><b>Definition:</b> <a href="a07116_source.html#l00438">CompositionModel.C:438</a></div></div>
<div class="ttc" id="a00332_html_a10018cadde2cb831b9a23ea65cbe126c"><div class="ttname"><a href="a00332.html#a10018cadde2cb831b9a23ea65cbe126c">Foam::CompositionModel::localToCarrierId</a></div><div class="ttdeci">label localToCarrierId(const label phaseI, const label id, const bool allowNotFound=false) const </div><div class="ttdoc">Return carrier id of component given local id. </div><div class="ttdef"><b>Definition:</b> <a href="a07116_source.html#l00201">CompositionModel.C:201</a></div></div>
<div class="ttc" id="a10920_html_a731b8788a4c01586c35266c7ca4fed04"><div class="ttname"><a href="a10920.html#a731b8788a4c01586c35266c7ca4fed04">Foam::constant::mathematical::pi</a></div><div class="ttdeci">const scalar pi(M_PI)</div></div>
<div class="ttc" id="a10909_html_affa366970bcbe0f7ccf7c85557a3e12b"><div class="ttname"><a href="a10909.html#affa366970bcbe0f7ccf7c85557a3e12b">Foam::Re</a></div><div class="ttdeci">scalarField Re(const UList&lt; complex &gt; &amp;cf)</div><div class="ttdef"><b>Definition:</b> <a href="a08256_source.html#l00097">complexFields.C:97</a></div></div>
<div class="ttc" id="a02903_html"><div class="ttname"><a href="a02903.html">Foam::Vector&lt; scalar &gt;</a></div></div>
<div class="ttc" id="a10909_html_a22f45a3cb4f074e609f58ebaeef0ecf9"><div class="ttname"><a href="a10909.html#a22f45a3cb4f074e609f58ebaeef0ecf9">Foam::label</a></div><div class="ttdeci">intWM_LABEL_SIZE_t label</div><div class="ttdoc">A label is an int32_t or int64_t as specified by the pre-processor macro WM_LABEL_SIZE. </div><div class="ttdef"><b>Definition:</b> <a href="a09222_source.html#l00059">label.H:59</a></div></div>
<div class="ttc" id="a01959_html"><div class="ttname"><a href="a01959.html">Foam::polyMesh</a></div><div class="ttdoc">Mesh consisting of general polyhedral cells. </div><div class="ttdef"><b>Definition:</b> <a href="a08974_source.html#l00074">polyMesh.H:74</a></div></div>
<div class="ttc" id="a07117_html"><div class="ttname"><a href="a07117.html">CompositionModel.H</a></div></div>
<div class="ttc" id="a01876_html"><div class="ttname"><a href="a01876.html">Foam::PhaseChangeModel</a></div><div class="ttdoc">Templated phase change model class. </div><div class="ttdef"><b>Definition:</b> <a href="a06791_source.html#l00055">ReactingCloud.H:55</a></div></div>
<div class="ttc" id="a02147_html"><div class="ttname"><a href="a02147.html">Foam::ReactingParcel</a></div><div class="ttdoc">Reacting parcel class with one/two-way coupling with the continuous phase. </div><div class="ttdef"><b>Definition:</b> <a href="a06887_source.html#l00050">ReactingParcel.H:50</a></div></div>
<div class="ttc" id="a02147_html_ad8f8e29c218563cbc811689b2b2ddb28"><div class="ttname"><a href="a02147.html#ad8f8e29c218563cbc811689b2b2ddb28">Foam::ReactingParcel::setCellValues</a></div><div class="ttdeci">void setCellValues(TrackData &amp;td, const scalar dt, const label celli)</div><div class="ttdoc">Set cell values. </div><div class="ttdef"><b>Definition:</b> <a href="a06886_source.html#l00206">ReactingParcel.C:206</a></div></div>
<div class="ttc" id="a02676_html"><div class="ttname"><a href="a02676.html">Foam::thermo</a></div><div class="ttdoc">Basic thermodynamics type based on the use of fitting functions for cp, h, s obtained from the templa...</div></div>
<div class="ttc" id="a10909_html_a2db8fe02a0d3909e9351bb4275b23ce4"><div class="ttname"><a href="a10909.html#a2db8fe02a0d3909e9351bb4275b23ce4">Foam::endl</a></div><div class="ttdeci">Ostream &amp; endl(Ostream &amp;os)</div><div class="ttdoc">Add newline and flush stream. </div><div class="ttdef"><b>Definition:</b> <a href="a08114_source.html#l00253">Ostream.H:253</a></div></div>
<div class="ttc" id="a10508_html"><div class="ttname"><a href="a10508.html">specie.H</a></div></div>
<div class="ttc" id="a02147_html_a6a46515d02de32cba752f8c0cdd512e9"><div class="ttname"><a href="a02147.html#a6a46515d02de32cba752f8c0cdd512e9">Foam::ReactingParcel::calc</a></div><div class="ttdeci">void calc(TrackData &amp;td, const scalar dt, const label celli)</div><div class="ttdoc">Update parcel properties over the time interval. </div><div class="ttdef"><b>Definition:</b> <a href="a06886_source.html#l00390">ReactingParcel.C:390</a></div></div>
<div class="ttc" id="a00107_html_a98fc615b86ae04a5a00a36c8fb619a16"><div class="ttname"><a href="a00107.html#a98fc615b86ae04a5a00a36c8fb619a16">Foam::basicMultiComponentMixture::Y</a></div><div class="ttdeci">PtrList&lt; volScalarField &gt; &amp; Y()</div><div class="ttdoc">Return the mass-fraction fields. </div><div class="ttdef"><b>Definition:</b> <a href="a10361_source.html#l00034">basicMultiComponentMixtureI.H:34</a></div></div>
<div class="ttc" id="a07991_html_a1a02bffef961ee015f0e9b03d336c6a9"><div class="ttname"><a href="a07991.html#a1a02bffef961ee015f0e9b03d336c6a9">forAll</a></div><div class="ttdeci">#define forAll(list, i)</div><div class="ttdoc">Loop across all elements in list. </div><div class="ttdef"><b>Definition:</b> <a href="a07991_source.html#l00428">UList.H:428</a></div></div>
<div class="ttc" id="a08051_html_a58548a3fc67fb931bc4e99f94d5f41b8"><div class="ttname"><a href="a08051.html#a58548a3fc67fb931bc4e99f94d5f41b8">WarningInFunction</a></div><div class="ttdeci">#define WarningInFunction</div><div class="ttdoc">Report a warning using Foam::Warning. </div><div class="ttdef"><b>Definition:</b> <a href="a08051_source.html#l00259">messageStream.H:259</a></div></div>
<div class="ttc" id="a02147_html_acc594749729798b20da613d9ab49b455"><div class="ttname"><a href="a02147.html#acc594749729798b20da613d9ab49b455">Foam::ReactingParcel::mass0_</a></div><div class="ttdeci">scalar mass0_</div><div class="ttdoc">Initial mass [kg]. </div><div class="ttdef"><b>Definition:</b> <a href="a06887_source.html#l00161">ReactingParcel.H:161</a></div></div>
<div class="ttc" id="a10909_html_aca0b7feea326c0e1e9e04078a319d019"><div class="ttname"><a href="a10909.html#aca0b7feea326c0e1e9e04078a319d019">Foam::cbrt</a></div><div class="ttdeci">dimensionedScalar cbrt(const dimensionedScalar &amp;ds)</div><div class="ttdef"><b>Definition:</b> <a href="a08192_source.html#l00153">dimensionedScalar.C:153</a></div></div>
<div class="ttc" id="a07140_html"><div class="ttname"><a href="a07140.html">PhaseChangeModel.H</a></div></div>
<div class="ttc" id="a00113_html_a0f5015a12d1bfe6ef0e38a1e13ae6f12"><div class="ttname"><a href="a00113.html#a0f5015a12d1bfe6ef0e38a1e13ae6f12">Foam::basicSpecieMixture::mu</a></div><div class="ttdeci">virtual scalar mu(const label speciei, const scalar p, const scalar T) const  =0</div><div class="ttdoc">Dynamic viscosity [kg/m/s]. </div></div>
<div class="ttc" id="a00332_html_ad09148d289e10bb0f0264a4623d3822b"><div class="ttname"><a href="a00332.html#ad09148d289e10bb0f0264a4623d3822b">Foam::CompositionModel::carrier</a></div><div class="ttdeci">const basicSpecieMixture &amp; carrier() const </div><div class="ttdoc">Return the carrier components (wrapper function) </div><div class="ttdef"><b>Definition:</b> <a href="a07116_source.html#l00089">CompositionModel.C:89</a></div></div>
<div class="ttc" id="a10909_html_aa0ae321d4861170e35fbb938636a4f40"><div class="ttname"><a href="a10909.html#aa0ae321d4861170e35fbb938636a4f40">Foam::pow4</a></div><div class="ttdeci">dimensionedScalar pow4(const dimensionedScalar &amp;ds)</div><div class="ttdef"><b>Definition:</b> <a href="a08192_source.html#l00098">dimensionedScalar.C:98</a></div></div>
<div class="ttc" id="a02413_html_ad09148d289e10bb0f0264a4623d3822b"><div class="ttname"><a href="a02413.html#ad09148d289e10bb0f0264a4623d3822b">Foam::SLGThermo::carrier</a></div><div class="ttdeci">const basicSpecieMixture &amp; carrier() const </div><div class="ttdoc">Return reference to the gaseous components. </div><div class="ttdef"><b>Definition:</b> <a href="a10392_source.html#l00108">SLGThermo.C:108</a></div></div>
<div class="ttc" id="a02147_html_a4da6ae35e13613b745f8e4fa6ce9087c"><div class="ttname"><a href="a02147.html#a4da6ae35e13613b745f8e4fa6ce9087c">Foam::ReactingParcel::ReactingParcel</a></div><div class="ttdeci">ReactingParcel(const polyMesh &amp;mesh, const vector &amp;position, const label celli, const label tetFacei, const label tetPtI)</div><div class="ttdoc">Construct from owner, position, and cloud owner. </div><div class="ttdef"><b>Definition:</b> <a href="a06888_source.html#l00064">ReactingParcelI.H:64</a></div></div>
<div class="ttc" id="a10944_html_ac92e296062b7b025a96b82351c1d9b89"><div class="ttname"><a href="a10944.html#ac92e296062b7b025a96b82351c1d9b89">Foam::fvc::Su</a></div><div class="ttdeci">tmp&lt; GeometricField&lt; Type, fvPatchField, volMesh &gt; &gt; Su(const GeometricField&lt; Type, fvPatchField, volMesh &gt; &amp;su, const GeometricField&lt; Type, fvPatchField, volMesh &gt; &amp;vf)</div><div class="ttdef"><b>Definition:</b> <a href="a05876_source.html#l00044">fvcSup.C:44</a></div></div>
<div class="ttc" id="a10909_html_ae57fda0abb14bb0944947c463c6e09d4"><div class="ttname"><a href="a10909.html#ae57fda0abb14bb0944947c463c6e09d4">Foam::T</a></div><div class="ttdeci">void T(FieldField&lt; Field, Type &gt; &amp;f1, const FieldField&lt; Field, Type &gt; &amp;f2)</div><div class="ttdef"><b>Definition:</b> <a href="a08236_source.html#l00055">FieldFieldFunctions.C:55</a></div></div>
<div class="ttc" id="a10909_html_ae53117a9770efe95d2d01bb5cc2c99ef"><div class="ttname"><a href="a10909.html#ae53117a9770efe95d2d01bb5cc2c99ef">Foam::nl</a></div><div class="ttdeci">static const char nl</div><div class="ttdef"><b>Definition:</b> <a href="a08114_source.html#l00262">Ostream.H:262</a></div></div>
<div class="ttc" id="a00332_html"><div class="ttname"><a href="a00332.html">Foam::CompositionModel</a></div><div class="ttdoc">Templated reacting parcel composition model class Consists of carrier species (via thermo package)...</div><div class="ttdef"><b>Definition:</b> <a href="a06791_source.html#l00052">ReactingCloud.H:52</a></div></div>
<div class="ttc" id="a02147_html_a5b56a067700e6158ee77c1f7f4844b6b"><div class="ttname"><a href="a02147.html#a5b56a067700e6158ee77c1f7f4844b6b">Foam::ReactingParcel::calcPhaseChange</a></div><div class="ttdeci">void calcPhaseChange(TrackData &amp;td, const scalar dt, const label celli, const scalar Re, const scalar Pr, const scalar Ts, const scalar nus, const scalar d, const scalar T, const scalar mass, const label idPhase, const scalar YPhase, const scalarField &amp;YComponents, scalarField &amp;dMassPC, scalar &amp;Sh, scalar &amp;N, scalar &amp;NCpW, scalarField &amp;Cs)</div><div class="ttdoc">Calculate Phase change. </div><div class="ttdef"><b>Definition:</b> <a href="a06886_source.html#l00039">ReactingParcel.C:39</a></div></div>
<div class="ttc" id="a02554_html_a6fd1dc792a0b98e6530a7383d4ef3074"><div class="ttname"><a href="a02554.html#a6fd1dc792a0b98e6530a7383d4ef3074">Foam::subModelBase::active</a></div><div class="ttdeci">virtual bool active() const </div><div class="ttdoc">Return the model &amp;#39;active&amp;#39; status - default active = true. </div><div class="ttdef"><b>Definition:</b> <a href="a09355_source.html#l00154">subModelBase.C:154</a></div></div>
<div class="ttc" id="a03036_html_a77ed71c4b333608a9d5c528ea28f04aa"><div class="ttname"><a href="a03036.html#a77ed71c4b333608a9d5c528ea28f04aa">composition</a></div><div class="ttdeci">basicMultiComponentMixture &amp; composition</div><div class="ttdef"><b>Definition:</b> <a href="a03036_source.html#l00002">createFieldRefs.H:2</a></div></div>
<div class="ttc" id="a01876_html_a269260e9dec7679dc167e6ae42afaef9"><div class="ttname"><a href="a01876.html#a269260e9dec7679dc167e6ae42afaef9">Foam::PhaseChangeModel::dh</a></div><div class="ttdeci">virtual scalar dh(const label idc, const label idl, const scalar p, const scalar T) const </div><div class="ttdoc">Return the enthalpy per unit mass. </div><div class="ttdef"><b>Definition:</b> <a href="a07139_source.html#l00129">PhaseChangeModel.C:129</a></div></div>
<div class="ttc" id="a06889_html"><div class="ttname"><a href="a06889.html">ReactingParcelIO.C</a></div></div>
<div class="ttc" id="a00332_html_a5380a8807acfea3ce69f4d4386f49f64"><div class="ttname"><a href="a00332.html#a5380a8807acfea3ce69f4d4386f49f64">Foam::CompositionModel::liquids</a></div><div class="ttdeci">const liquidMixtureProperties &amp; liquids() const </div><div class="ttdoc">Return the global (additional) liquids. </div><div class="ttdef"><b>Definition:</b> <a href="a07116_source.html#l00097">CompositionModel.C:97</a></div></div>
<div class="ttc" id="a10909_html_a253e112ad2d56d96230ff39ea7f442dc"><div class="ttname"><a href="a10909.html#a253e112ad2d56d96230ff39ea7f442dc">Foam::min</a></div><div class="ttdeci">dimensioned&lt; Type &gt; min(const dimensioned&lt; Type &gt; &amp;, const dimensioned&lt; Type &gt; &amp;)</div></div>
<div class="ttc" id="a02413_html"><div class="ttname"><a href="a02413.html">Foam::SLGThermo</a></div><div class="ttdoc">Thermo package for (S)olids (L)iquids and (G)ases Takes reference to thermo package, and provides: </div><div class="ttdef"><b>Definition:</b> <a href="a10393_source.html#l00062">SLGThermo.H:62</a></div></div>
<div class="ttc" id="a00107_html_ac3684786b3929e4b59bca4087f9f4609"><div class="ttname"><a href="a00107.html#ac3684786b3929e4b59bca4087f9f4609">Foam::basicMultiComponentMixture::species</a></div><div class="ttdeci">const speciesTable &amp; species() const </div><div class="ttdoc">Return the table of species. </div><div class="ttdef"><b>Definition:</b> <a href="a10361_source.html#l00027">basicMultiComponentMixtureI.H:27</a></div></div>
<div class="ttc" id="a00765_html"><div class="ttname"><a href="a00765.html">Foam::Field&lt; scalar &gt;</a></div></div>
<div class="ttc" id="a00113_html_ad064cd901ba7e9eaf0877f49761beb30"><div class="ttname"><a href="a00113.html#ad064cd901ba7e9eaf0877f49761beb30">Foam::basicSpecieMixture::W</a></div><div class="ttdeci">virtual scalar W(const label speciei) const  =0</div><div class="ttdoc">Molecular weight of the given specie [kg/kmol]. </div></div>
<div class="ttc" id="a10909_html_a3d8733143aad0e03b300186ab4bef137"><div class="ttname"><a href="a10909.html#a3d8733143aad0e03b300186ab4bef137">Foam::sum</a></div><div class="ttdeci">dimensioned&lt; Type &gt; sum(const DimensionedField&lt; Type, GeoMesh &gt; &amp;df)</div><div class="ttdef"><b>Definition:</b> <a href="a08215_source.html#l00333">DimensionedFieldFunctions.C:333</a></div></div>
<div class="ttc" id="a01876_html_a9a5edae723e86cbd5e41e11516b62018"><div class="ttname"><a href="a01876.html#a9a5edae723e86cbd5e41e11516b62018">Foam::PhaseChangeModel::TMax</a></div><div class="ttdeci">virtual scalar TMax(const scalar p, const scalarField &amp;X) const </div><div class="ttdoc">Return maximum/limiting temperature. </div><div class="ttdef"><b>Definition:</b> <a href="a07139_source.html#l00142">PhaseChangeModel.C:142</a></div></div>
<div class="ttc" id="a02147_html_a7aee4772814d30e73bac7b78e3e709be"><div class="ttname"><a href="a02147.html#a7aee4772814d30e73bac7b78e3e709be">Foam::ReactingParcel::Y_</a></div><div class="ttdeci">scalarField Y_</div><div class="ttdoc">Mass fractions of mixture []. </div><div class="ttdef"><b>Definition:</b> <a href="a06887_source.html#l00164">ReactingParcel.H:164</a></div></div>
<div class="ttc" id="a00113_html_a2a515bef556acbed90dc25f7c53f4633"><div class="ttname"><a href="a00113.html#a2a515bef556acbed90dc25f7c53f4633">Foam::basicSpecieMixture::kappa</a></div><div class="ttdeci">virtual scalar kappa(const label speciei, const scalar p, const scalar T) const  =0</div><div class="ttdoc">Thermal conductivity [W/m/K]. </div></div>
<div class="ttc" id="a10909_html_ac993e906cf2774ae77e666bc24e81733"><div class="ttname"><a href="a10909.html#ac993e906cf2774ae77e666bc24e81733">Foam::max</a></div><div class="ttdeci">dimensioned&lt; Type &gt; max(const dimensioned&lt; Type &gt; &amp;, const dimensioned&lt; Type &gt; &amp;)</div></div>
<div class="ttc" id="a02147_html_ad23f968a90e9edb0ad5563807ae78ceb"><div class="ttname"><a href="a02147.html#ad23f968a90e9edb0ad5563807ae78ceb">Foam::ReactingParcel::updateMassFraction</a></div><div class="ttdeci">scalar updateMassFraction(const scalar mass0, const scalarField &amp;dMass, scalarField &amp;Y) const </div><div class="ttdoc">Update mass fraction. </div><div class="ttdef"><b>Definition:</b> <a href="a06886_source.html#l00151">ReactingParcel.C:151</a></div></div>
<div class="ttc" id="a02147_html_af47d660ddf922326f7b61a7d841572e5"><div class="ttname"><a href="a02147.html#af47d660ddf922326f7b61a7d841572e5">Foam::ReactingParcel::cellValueSourceCorrection</a></div><div class="ttdeci">void cellValueSourceCorrection(TrackData &amp;td, const scalar dt, const label celli)</div><div class="ttdoc">Correct cell values using latest transfer information. </div><div class="ttdef"><b>Definition:</b> <a href="a06886_source.html#l00237">ReactingParcel.C:237</a></div></div>
<div class="ttc" id="a01876_html_ac37ac5442b13fc0752754be6a5d0971f"><div class="ttname"><a href="a01876.html#ac37ac5442b13fc0752754be6a5d0971f">Foam::PhaseChangeModel::calculate</a></div><div class="ttdeci">virtual void calculate(const scalar dt, const label celli, const scalar Re, const scalar Pr, const scalar d, const scalar nu, const scalar T, const scalar Ts, const scalar pc, const scalar Tc, const scalarField &amp;X, scalarField &amp;dMassPC) const  =0</div><div class="ttdoc">Update model. </div></div>
<div class="ttc" id="a02147_html_a85e4067164c0d187844a02e1dab4506b"><div class="ttname"><a href="a02147.html#a85e4067164c0d187844a02e1dab4506b">Foam::ReactingParcel::correctSurfaceValues</a></div><div class="ttdeci">void correctSurfaceValues(TrackData &amp;td, const label celli, const scalar T, const scalarField &amp;Cs, scalar &amp;rhos, scalar &amp;mus, scalar &amp;Prs, scalar &amp;kappas)</div><div class="ttdoc">Correct surface values due to emitted species. </div><div class="ttdef"><b>Definition:</b> <a href="a06886_source.html#l00298">ReactingParcel.C:298</a></div></div>
</div><!-- fragment --></div><!-- contents -->
  <!-- end of doxygen-generated content -->
  </div> <!-- main -->
  <div class="footer">
    <p>
      Copyright&nbsp;&copy;&nbsp;2011-2016&nbsp;
      <a href="http://www.openfoam.org">OpenFOAM Foundation</a>
      |
      OPENFOAM&reg; is a registered
      <a href="http://www.openfoam.com/legal/trademark-policy.php">trademarks
      </a> of OpenCFD Ltd.
    </p>
    <p class="credits">
      Based on design by
      <a target="new" href="http://1234.info">1234.info</a>
      |
      Content generated by
      <a target="new" href="http://www.doxygen.org">doxygen</a>
    </p>
  </div>  <!-- footer -->
</div>  <!-- page-container -->
</body>
</html>
